import{f as h,l as C,g,h as T,c as f,a as s,i as k,b as d,w as u,r as U,j as V,k as v,v as _,t as b,d as i,o as w,u as E,_ as I}from"./index-Csc8XsQ4.js";import{_ as N}from"./logo-v3-Caxdigjt.js";import{e as S,g as q,d as B,b as L,a as j,T as y}from"./toastify-B53tPeiT.js";const D=async r=>{const{email:c,password:m}=r,e=(await S(L,c,m)).user.uid,o=await q(B(j,"users",e));if(!o.exists())throw new Error("Usuario no encontrado.");return{id:e,...o.data()}},M=async r=>{if(!r.email||!r.password)throw new Error("Correo y contraseña son obligatorios.");return D(r)},P={class:"d-flex align-items-center justify-content-center auth-login"},R={class:"container"},A={class:"row justify-content-center"},H={class:"col-md-6 col-lg-5"},J={class:"card shadow-sm text-white"},O={class:"card-body"},W={class:"card-title text-center"},$={class:"mb-3"},z={class:"mb-3"},F={class:"d-grid gap-2"},G=["disabled"],K={class:"text-center mt-3"},Q={class:"text-center mt-3"},X={class:"text-center"},Y={key:0,class:"text-danger text-center mt-2"},Z=h({__name:"LoginPage",setup(r){const c=E(),m=C(),a=g(!1),e=g(""),o=T({email:"",password:""}),x=async()=>{e.value="",a.value=!0;try{const n=await M(o);m.setUser(n),y({text:`¡Bienvenido ${n.name||"null"}!`,duration:3e3,gravity:"top",position:"right",style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),setTimeout(()=>{c.push("/dashboard")},1500)}catch(n){e.value=n.message||"Error al iniciar sesión",y({text:e.value,duration:4e3,gravity:"top",position:"right",style:{background:"#e63946"}}).showToast()}finally{a.value=!1}};return(n,t)=>{const l=U("router-link");return w(),f("div",P,[s("div",R,[s("div",A,[s("div",H,[s("div",J,[s("div",O,[s("h2",W,[d(l,{to:"/"},{default:u(()=>t[2]||(t[2]=[s("img",{src:N,alt:"Logo",width:"80",style:{filter:"brightness(0) invert(1)","margin-bottom":"10px"}},null,-1),s("br",null,null,-1)])),_:1,__:[2]})]),t[12]||(t[12]=s("h2",{class:"card-tile text-center"},"Iniciar sesión",-1)),t[13]||(t[13]=s("br",null,null,-1)),s("form",{onSubmit:V(x,["prevent"])},[s("div",$,[t[3]||(t[3]=s("label",{for:"email",class:"form-label"},"Correo electrónico",-1)),v(s("input",{"onUpdate:modelValue":t[0]||(t[0]=p=>o.email=p),type:"email",class:"form-control",placeholder:"Tu correo",required:""},null,512),[[_,o.email]])]),s("div",z,[t[4]||(t[4]=s("label",{for:"password",class:"form-label"},"Contraseña",-1)),v(s("input",{"onUpdate:modelValue":t[1]||(t[1]=p=>o.password=p),type:"password",class:"form-control",placeholder:"Tu contraseña",required:""},null,512),[[_,o.password]])]),s("div",F,[s("button",{disabled:a.value,class:"btn btn-primary",type:"submit"},b(a.value?"Ingresando...":"Iniciar sesión"),9,G)])],32),s("div",K,[t[6]||(t[6]=i(" ¿No tienes una cuenta de JearCast?")),t[7]||(t[7]=s("br",null,null,-1)),d(l,{to:"/auth/register",class:"text-primary"},{default:u(()=>t[5]||(t[5]=[i("Regístrate aquí")])),_:1,__:[5]})]),s("div",Q,[t[9]||(t[9]=i(" ¿Olvidaste tu contraseña?")),t[10]||(t[10]=s("br",null,null,-1)),d(l,{to:"/auth/forgot-password",class:"text-primary"},{default:u(()=>t[8]||(t[8]=[i("Recuperala aquí")])),_:1,__:[8]})]),t[14]||(t[14]=s("br",null,null,-1)),s("div",X,[d(l,{to:"/",class:"text-primary"},{default:u(()=>t[11]||(t[11]=[i("Home")])),_:1,__:[11]})]),e.value?(w(),f("p",Y,b(e.value),1)):k("",!0)])])])])])])}}}),ot=I(Z,[["__scopeId","data-v-e7da6054"]]);export{ot as default};
