import{d as w,l as y,g as u,h as x,c as m,e,i as C,f as c,j as T,k as p,v as g,t as _,b as k,w as U,r as V,o as f,u as E}from"./index-DxGCOh1w.js";import{_ as I}from"./logo-v3-D2L8RnEv.js";import{e as N,g as S,d as B,b as L,a as j,T as v}from"./toastify-D_6xm2ia.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const D=async a=>{const{email:n,password:l}=a,t=(await N(L,n,l)).user.uid,o=await S(B(j,"users",t));if(!o.exists())throw new Error("Usuario no encontrado.");return{id:t,...o.data()}},M=async a=>{if(!a.email||!a.password)throw new Error("Correo y contraseña son obligatorios.");return D(a)},P={class:"d-flex align-items-center justify-content-center auth-login"},R={class:"container"},A={class:"row justify-content-center"},W={class:"col-md-6 col-lg-5"},$={class:"card shadow-sm text-white"},z={class:"card-body"},F={class:"mb-3"},G={class:"mb-3"},H={class:"d-grid gap-2"},J=["disabled"],K={class:"text-center mt-3"},O={key:0,class:"text-danger text-center mt-2"},Q=w({__name:"LoginPage",setup(a){const n=E(),l=y(),r=u(!1),t=u(""),o=x({email:"",password:""}),b=async()=>{t.value="",r.value=!0;try{const i=await M(o);l.setUser(i),v({text:`¡Bienvenido ${i.name||"null"}!`,duration:3e3,gravity:"top",position:"right",style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),setTimeout(()=>{n.push("/dashboard")},1500)}catch(i){t.value=i.message||"Error al iniciar sesión",v({text:t.value,duration:4e3,gravity:"top",position:"right",style:{background:"#e63946"}}).showToast()}finally{r.value=!1}};return(i,s)=>{const h=V("router-link");return f(),m("div",P,[e("div",R,[e("div",A,[e("div",W,[e("div",$,[e("div",z,[s[6]||(s[6]=e("h2",{class:"card-title text-center mb-4"},[e("img",{src:I,alt:"Logo",width:"80",style:{filter:"brightness(0) invert(1)","margin-bottom":"10px"}}),e("br"),c(" Iniciar sesión ")],-1)),e("form",{onSubmit:T(b,["prevent"])},[e("div",F,[s[2]||(s[2]=e("label",{for:"email",class:"form-label"},"Correo electrónico",-1)),p(e("input",{"onUpdate:modelValue":s[0]||(s[0]=d=>o.email=d),type:"email",class:"form-control",placeholder:"Tu correo",required:""},null,512),[[g,o.email]])]),e("div",G,[s[3]||(s[3]=e("label",{for:"password",class:"form-label"},"Contraseña",-1)),p(e("input",{"onUpdate:modelValue":s[1]||(s[1]=d=>o.password=d),type:"password",class:"form-control",placeholder:"Tu contraseña",required:""},null,512),[[g,o.password]])]),e("div",H,[e("button",{disabled:r.value,class:"btn btn-primary",type:"submit"},_(r.value?"Ingresando...":"Iniciar sesión"),9,J)])],32),e("div",K,[s[5]||(s[5]=c(" ¿No tienes una cuenta? ")),k(h,{to:"/auth/register",class:"text-primary"},{default:U(()=>s[4]||(s[4]=[c("Regístrate aquí")])),_:1,__:[4]})]),t.value?(f(),m("p",O,_(t.value),1)):C("",!0)])])])])])])}}}),se=q(Q,[["__scopeId","data-v-cd2aee17"]]);export{se as default};
