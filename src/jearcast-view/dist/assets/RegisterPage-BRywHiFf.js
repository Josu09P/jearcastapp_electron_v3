import{f as _,g as y,h as x,c as w,a as t,i as h,d as p,j as k,k as d,v as u,t as v,b as T,w as P,r as Y,o as g,u as C,_ as V}from"./index-Csc8XsQ4.js";import{_ as A}from"./logo-v3-Caxdigjt.js";import{c as R,s as q,d as I,a as K,b as U,T as m}from"./toastify-B53tPeiT.js";const D=async r=>{const{email:l,password:a,name:i,apikeyYoutube:s}=r,c=(await R(U,l,a)).user.uid,n={name:i,email:l,create_at:new Date,apikeyYoutube:s};return await q(I(K,"users",c),n),{id:c,...n,email:l,name:i}},E=async r=>{if(r.password!==r.confirmPassword)throw new Error("Las contrase√±as no coinciden.");return D(r)},N={class:"d-flex align-items-center justify-content-center auth-register"},j={class:"container"},B={class:"row justify-content-center"},M={class:"col-md-6 col-lg-5"},S={class:"card shadow-sm text-white"},L={class:"card-body"},z={class:"mb-3"},G={class:"mb-3"},W={class:"mb-3"},$={class:"mb-3"},F={class:"mb-3"},H={class:"d-grid gap-2"},J=["disabled"],O={class:"text-center mt-3"},Q={key:0,class:"text-danger text-center mt-2"},X=_({__name:"RegisterPage",setup(r){const l=C(),a=y(!1),i=y(""),s=x({name:"",email:"",password:"",confirmPassword:"",apikeyYoutube:""});async function b(n){try{return!(await(await fetch(`https://www.googleapis.com/youtube/v3/search?part=snippet&q=prueba&type=video&maxResults=1&key=${n}`)).json()).error}catch{return!1}}const c=async()=>{if(i.value="",a.value=!0,m({text:"üîç Verificando datos... Probando API Key de YouTube",duration:3e3,style:{background:"#0d6efd"}}).showToast(),await new Promise(e=>setTimeout(e,500)),!await b(s.apikeyYoutube)){m({text:"‚ùå La API Key de YouTube no es v√°lida.",duration:4e3,style:{background:"#dc3545"}}).showToast(),a.value=!1;return}try{await E(s),m({text:"‚úÖ Registro exitoso. ¬°Bienvenido!",duration:3e3,style:{background:"linear-gradient(to right, #00b09b, #96c93d)"}}).showToast(),setTimeout(()=>l.push("/auth/login"),2e3)}catch(e){m({text:e.message||"Error al registrar",duration:4e3,style:{background:"#e63946"}}).showToast()}finally{a.value=!1}};return(n,e)=>{const f=Y("router-link");return g(),w("div",N,[t("div",j,[t("div",B,[t("div",M,[t("div",S,[t("div",L,[e[13]||(e[13]=t("h3",{class:"card-title text-center mb-4"},[t("img",{src:A,alt:"Logo",width:"80",style:{filter:"brightness(0) invert(1)","margin-bottom":"10px"}}),t("br"),p(" Crear cuenta ")],-1)),t("form",{onSubmit:k(c,["prevent"])},[t("div",z,[e[5]||(e[5]=t("label",{for:"name",class:"form-label"},"Nombre completo",-1)),d(t("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>s.name=o),type:"text",class:"form-control",placeholder:"Ingresa tu nombre",required:""},null,512),[[u,s.name]])]),t("div",G,[e[6]||(e[6]=t("label",{for:"email",class:"form-label"},"Correo electr√≥nico",-1)),d(t("input",{"onUpdate:modelValue":e[1]||(e[1]=o=>s.email=o),type:"email",class:"form-control",placeholder:"Correo asociado a Google",required:""},null,512),[[u,s.email]])]),t("div",W,[e[7]||(e[7]=t("label",{for:"password",class:"form-label"},"Contrase√±a",-1)),d(t("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>s.password=o),type:"password",class:"form-control",placeholder:"M√≠nimo 6 caracteres",required:""},null,512),[[u,s.password]])]),t("div",$,[e[8]||(e[8]=t("label",{for:"confirmPassword",class:"form-label"},"Confirmar contrase√±a",-1)),d(t("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>s.confirmPassword=o),type:"password",class:"form-control",placeholder:"Repite tu contrase√±a",required:""},null,512),[[u,s.confirmPassword]])]),t("div",F,[e[9]||(e[9]=t("label",{for:"apikeyYoutube",class:"form-label"},"API Key de YouTube",-1)),d(t("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>s.apikeyYoutube=o),type:"text",class:"form-control",placeholder:"Tu API Key de YouTube"},null,512),[[u,s.apikeyYoutube]]),e[10]||(e[10]=t("div",{class:"form-text text-light"}," Esta clave ser√° usada para realizar b√∫squedas de videos. ",-1))]),t("div",H,[t("button",{disabled:a.value,type:"submit",class:"btn btn-primary"},v(a.value?"Registrando...":"Registrarme"),9,J)])],32),t("div",O,[e[12]||(e[12]=p(" ¬øYa tienes una cuenta? ")),T(f,{to:"/auth/login",class:"text-primary"},{default:P(()=>e[11]||(e[11]=[p("Inicia sesi√≥n aqu√≠")])),_:1,__:[11]})]),i.value?(g(),w("p",Q,v(i.value),1)):h("",!0)])])])])])])}}}),se=V(X,[["__scopeId","data-v-6b8969c5"]]);export{se as default};
